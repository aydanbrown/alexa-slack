# Slack API module

An extremely simple Slack API integration.

## API Documentation

For Slack API documentation visit https://api.slack.com/methods

## Prerequisites

First you will need a Slack testing token which can be created [here](https://api.slack.com/tokens). <br>
You will need to make a Slack config file in the slack module's directory ```slack/config.js``` with a token value (your Slack testing token). <br>
You can copy the ```slack/default-config.js``` and replace the token value with your own.

## Usage

Require the package:

``` js
var slack = require('slack');
```

Then call slack with a method, (options and callback):

* method (required) - the Slack API method, you can find a list [here](https://api.slack.com/methods).
* options (optional) - a map of the query parameters.
* callback (optional) - an optional callback

Using a default callback:
``` js
slack('{method}', { '{key}': '{option}' }, function(err, result) {
  if(err) return console.error(err);
  console.log(result);
});
```

#### Event listeners

Alternatively you can use event listeners:
``` js
slack('{method}', { '{key}': '{option}' })
.on('success', function(result) {
  console.log(response);
})
.on('fail', function(err, result) {
  console.log(result.error);
})
.on('error', function(err) {
  console.error(err);
});
```

Events:
* success (result) - called when the response was successful
* fail (error, result) - called when slack does not response with an "ok" status
* error (error) - called when there was an error with the request or the "fail" event requirements are met but no listener is defined
* callback (error, result) - called when there are no listeners for the desired callback

### Examples

Set a channels topic:
``` js
slack('channels.setTopic', { channel: 'C123456789', topic: 'Some topic' }, function(err, res) {
  if(err) return console.error(err);
  if(res.ok) {
    console.log('Topic set');
  }
})
```

List channel IDs and names (using event listeners):
``` js
slack('channels.list')
.on('success', function(res) {
  res.channels.forEach(function(channel) {
    console.log(`${channel.id} - ${channel.name}`);
  })
})
.on('error', function(err) {
  console.log(err);
});
```

List the text of the last 10 messages in a channel:
``` js
slack('channels.history', { channel: 'C123456789', count: 10 }, function(err, res) {
  if(err) return console.error(err);
  if(res.ok) {
    res.messages.forEach(function(message) {
      console.log(message.text);
    });
  }
})
```
